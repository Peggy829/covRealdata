"use strict";function gettime(){$("#tim").html((new Date).format("yyyy-MM-dd hh:mm:ss"))}function getNowConfirm(){$.ajax({url:"/nowConfirm",success:function(t){t=JSON.parse(t);for(var e=0;e<t.length;e++)$(".nowConfirmList ol").append("<li><a src='' data-content="+t[e].nowConfirm+">"+t[e].city+"</a></li>")},error:function(){}})}function get_c1_data(){$.ajax({url:"/c1",success:function(t){t=JSON.parse(t),$(".num h1").eq(0).text(t.confirm),$(".num h1").eq(1).text(t.nowConfirm),$(".num h1").eq(2).text(t.heal),$(".num h1").eq(3).text(t.dead)},error:function(){}})}function get_c2_data(){$.ajax({url:"/c2",success:function(t){t=JSON.parse(t),ec_center_option.series[0].data=t.data,ec_center.setOption(ec_center_option)},error:function(){}})}function get_l1_data(){$.ajax({url:"/l1",success:function(t){t=JSON.parse(t),ec_left1_Option.xAxis[0].data=t.day,ec_left1_Option.series[0].data=t.confirm,ec_left1_Option.series[1].data=t.suspect,ec_left1_Option.series[2].data=t.heal,ec_left1_Option.series[3].data=t.dead,ec_left1.setOption(ec_left1_Option)},error:function(){}})}function get_l2_data(){$.ajax({url:"/l2",success:function(t){t=JSON.parse(t),ec_left2_Option.xAxis[0].data=t.day,ec_left2_Option.series[0].data=t.confirm_add,ec_left2_Option.series[1].data=t.suspect_add,ec_left2.setOption(ec_left2_Option)},error:function(){}})}function get_r1_data(){$.ajax({url:"/r1",success:function(t){t=JSON.parse(t),ec_right1_option.xAxis.data=t.city,ec_right1_option.series[0].data=t.confirm,ec_right1.setOption(ec_right1_option)}})}function get_r2_data(){$.ajax({url:"/r2",success:function(t){t=JSON.parse(t),ec_right2_option.series[0].data=t.kws,ec_right2.setOption(ec_right2_option)}})}Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t},gettime(),get_c1_data(),get_c2_data(),get_l1_data(),get_l2_data(),get_r1_data(),get_r2_data(),setInterval(gettime,1e3),setInterval(get_c1_data,7e5),setInterval(get_c2_data,7e5),setInterval(get_l1_data,7e5),setInterval(get_l2_data,7e5),setInterval(get_r1_data,7e5),setInterval(get_r2_data,1e4);var ec_center=echarts.init(document.getElementById("c2"),"dark");window.addEventListener("resize",function(){ec_center.resize()});var mydata=[{name:"上海",value:318},{name:"云南",value:162}],ec_center_option={title:{text:"",subtext:"",x:"left"},tooltip:{trigger:"item"},grid:{top:0},visualMap:{show:!0,x:"left",y:"bottom",itemWidth:e/1082*10,itemHeight:e/1082*10,textStyle:{fontSize:e/1082*10},splitList:[{start:1,end:9},{start:10,end:99},{start:100,end:999},{start:1e3,end:9999},{start:1e4}],color:["#8A3310","#C64918","#E55B25","#F2AD92","#F9DCD1"]},series:[{name:"累计确诊人数",type:"map",mapType:"china",roam:!1,itemStyle:{normal:{borderWidth:.5,borderColor:"#009fe8",areaColor:"#ffefd5"},emphasis:{borderWidth:.5,borderColor:"#4b0082",areaColor:"#fff"}},label:{normal:{show:!0,fontSize:e/1082*10},emphasis:{show:!0,fontSize:e/1082*10}},data:[]}]};ec_center.setOption(ec_center_option);var ec_left1=echarts.init(document.getElementById("l1"),"dark");window.addEventListener("resize",function(){ec_left1.resize()});var ec_left1_Option={title:{text:"全国累计趋势",textStyle:{fontSize:e/1082*14},left:"left"},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#7171C6"}}},legend:{data:["累计确诊","现有疑似","累计治愈","累计死亡"],left:"right",top:"10%",textStyle:{fontSize:e/1082*12}},grid:{left:"4%",right:"6%",bottom:"4%",top:60,containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",axisLabel:{show:!0,color:"white",fontSize:12,formatter:function(t){return 1e3<=t&&(t=t/1e3+"k"),t}},axisLine:{show:!0},splitLine:{show:!0,lineStyle:{color:"#17273B",width:1,type:"solid"}}}],series:[{name:"累计确诊",type:"line",smooth:!0,data:[]},{name:"现有疑似",type:"line",smooth:!0,data:[]},{name:"累计治愈",type:"line",smooth:!0,data:[]},{name:"累计死亡",type:"line",smooth:!0,data:[]}]};ec_left1.setOption(ec_left1_Option);var ec_left2=echarts.init(document.getElementById("l2"),"dark");window.addEventListener("resize",function(){ec_left2.resize()});var ec_left2_Option={tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#7171C6"}}},legend:{data:["新增确诊","新增疑似"],left:"right",textStyle:{fontSize:e/1082*12},top:"10%"},title:{text:"全国新增趋势",textStyle:{fontSize:e/1082*14},left:"left"},grid:{left:"4%",right:"6%",bottom:"4%",top:50,containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",axisLine:{show:!0},axisLabel:{show:!0,color:"white",fontSize:12,formatter:function(t){return 1e3<=t&&(t=t/1e3+"k"),t}},splitLine:{show:!0,lineStyle:{color:"#17273B",width:1,type:"solid"}}}],series:[{name:"新增确诊",type:"line",smooth:!0,data:[]},{name:"新增疑似",type:"line",smooth:!0,data:[]}]};ec_left2.setOption(ec_left2_Option);var ec_right1=echarts.init(document.getElementById("r1"),"dark");window.addEventListener("resize",function(){ec_right1.resize()});var ec_right1_option={title:{text:"非湖北地区城市确诊TOP5",textStyle:{fontSize:e/1082*14},left:"left"},color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:[],axisLabel:{rotate:38,textStyle:{fontSize:e/1082*10}}},yAxis:{type:"value"},grid:{left:"20%",top:"15%",bottom:"15%"},series:[{data:[],type:"bar"}]};ec_right1.setOption(ec_right1_option);var ec_right2=echarts.init(document.getElementById("r2"),"dark");window.addEventListener("resize",function(){ec_right2.resize()});var ddd=[{name:"肺炎",value:"12734670"},{name:"实时",value:"12734670"},{name:"新型",value:"12734670"}],ec_right2_option={title:{text:"今日疫情热搜",textStyle:{fontSize:e/1082*14},left:"left"},tooltip:{show:!1},series:[{type:"wordCloud",gridSize:1,sizeRange:[12,55],rotationRange:[-45,0,45,90],textStyle:{fontSize:e/1082*14,normal:{color:function(){return"rgb("+Math.round(255*Math.random())+", "+Math.round(255*Math.random())+", "+Math.round(255*Math.random())+")"}}},right:null,bottom:null,data:[]}]};ec_right2.setOption(ec_right2_option);